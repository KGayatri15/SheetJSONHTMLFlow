<!DOCTYPE html>
<html>
    <head>
        <title>Sign In</title>
        <link rel="stylesheet" href="../beauty/signin.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <form class="modal-content" onsubmit="login(event);">
            <div class="container">
              <h1>Sign In</h1>
              <input type="text" placeholder="Enter Username / Email" id="text" required>
              <input type="password" placeholder="Enter Password" id="password" minlength="5" required>
              <input type="submit" class="signin" value="Sign In"/>
              <p>Don't have an account ?<a href="./signup.html" style="color:dodgerblue">Sign Up now</a>.</p>
            </div>
          </form>
    </body>
    <script>
        function login(event){
            event.preventDefault();
            var credentials = localStorage.getItem('Credentials');
            if(credentials==null){
                alert("You don't have an account with ehh Redirecting to Sign Up Page");
                window.location.href = './signup.html';
            }else{
                var json = JSON.parse(credentials);
                if(json['Password'] === document.getElementById('password').value &&(json['Username'] === document.getElementById('text').value ||json['EmailID'] === document.getElementById('text').value)){
                    alert('Correct credentials');
                    localStorage.setItem('emailID',json['EmailID']);
                    localStorage.setItem('LoginEhh'+localStorage.getItem('emailID'),true);
                    window.location.href = './indexActionSpace_V5Treeview.html';
                }else{
                    alert("Wrong Credentials");
                    document.getElementById('text').value = '';
                    document.getElementById('password').value = '';
                }
            }
        }
    </script>
</html>