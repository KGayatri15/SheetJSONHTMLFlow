<!DOCTYPE html>
<html>
    <head>
        <title>Sign In</title>
        <link rel="stylesheet" href="../beauty/signin.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script type="text/javascript" src="../function/allMerged_V5.js"></script>
        <script type="text/javascript" src="../function/actionHelpers.js"></script>
        <script type="text/javascript" src="../form/sysDataSet.js"></script>
        <script type="text/javascript" src="../form/actionContent_UserData.js"></script>
        <script type="text/javascript" src="../form/appViewTemplates.js"></script>
    </head>
    <body>
    </body>
    <script>
     const scriptURL = 'https://script.google.com/macros/s/AKfycbwfDv5y9elBrAOqV8f2bwNDRVTc2cYpj9sHUFJ-z1n2-jGWmA1K0x3wIDmWX6t1w3xFPw/exec';
        window.onload = (event)=>{
            event.preventDefault();
            var form = new Entity(SignInJSON,document.getElementsByTagName('body')[0]);
        }
        async function login(event){
            event.preventDefault();
            var url = scriptURL + '?EmailId='+document.getElementById('email').value + '&Password='+document.getElementById('password').value ;
            await fetch(url)
            .then(res =>{
              console.log("Status of Sign In GET request:- " + res.status);
              return res.text();
            })
            .then(res=>{
                console.log(res);
                var response = JSON.parse(res);
                if(response.result == 'success'){
                    alert(response.output);
                    localStorage.setItem('LoginEhh'+document.getElementById('email').value,true);
                    window.location.href = './indexActionSpace_V5Treeview.html';
                }else if(response.result == 'failed'){
                    alert(response.output);
                }else{
                    alert('Encountered an error.Try Again..Thank You for your patience !');
                }
            })
            .catch(err =>{console.log(err)})
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
        }
    </script>
</html>